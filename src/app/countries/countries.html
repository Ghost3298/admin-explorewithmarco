<app-base-list
    [pageTitle]="pageConfig.title"
    [searchPlaceholder]="pageConfig.searchPlaceholder"
    [buttonText]="pageConfig.buttonText"
    [tableColumns]="pageConfig.tableColumns"
    [popupTitle]="pageConfig.popupTitle">
    
    <app-spinner 
        [show]="isLoading" 
        message="Loading countries..."
        [fullScreen]="false">
    </app-spinner>
    
    <tbody>
        <!-- Custom table rows for countries -->
        <tr *ngIf="countries.length === 0">
            <td colspan="4" class="empty-state">
                No countries found. Click "Add Country" to create one.
            </td>
        </tr>
        <tr *ngFor="let country of countries">
            <td>{{ country.country_name }}</td>
            <td>
                <img *ngIf="country.country_image" [src]="country.country_image" [alt]="country.country_name" class="table-image"/>
                <span *ngIf="!country.country_image" class="no-image">No image</span>
            </td>
            <td>
                <span [class]="country.status ? 'status-active' : 'status-inactive'">
                    {{ country.status ? 'Active' : 'Inactive' }}
                </span>
            </td>
            <td>
                <div class="action-buttons">
                    <app-button-shared text="Edit" variant="warning" (onClick)="editCountry(country)" size="sm"/>
                    <app-button-shared text="Set Inactive" variant="danger" (onClick)="deleteCountry(country)" size="sm"/>
                </div>
            </td>
        </tr>
    </tbody>

   <div popup-content>
        <form class="popup-form" [formGroup]="countryForm" (ngSubmit)="onSubmit()">
            <!-- Country Name Field -->
            <div class="form-group">
                <label for="country_name">Country Name *</label>
                <app-input-shared 
                    id="country_name"
                    type="text" 
                    placeholder="Enter country name" 
                    formControlName="country_name"
                    [class.error]="countryName?.invalid && countryName?.touched" />
                <div *ngIf="countryName?.invalid && countryName?.touched" class="error-message">
                    <span *ngIf="countryName?.errors?.['required']">Country name is required</span>
                </div>
            </div>

            <!-- Country Image Field -->
            <div class="form-group">
                <label for="country_image">Country Image *</label>
                <input 
                    id="country_image"
                    type="file" 
                    (change)="onFileSelected($event)"
                    class="form-control" />
                <div *ngIf="selectedFile" class="file-info">
                    Selected file: {{ selectedFile.name }}
                </div>
            </div>

            <div class="form-actions">
                <app-button-shared 
                    variant="secondary" 
                    text="Cancel" 
                    type="button"
                    (click)="onCancel()" />
                <app-button-shared 
                    variant="success" 
                    text="Save Country" 
                    type="submit"
                    [disabled]="countryForm.invalid" />
            </div>
        </form>
    </div>
</app-base-list>